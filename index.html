<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Voice Translator + Video</title>
</head>
<body>
  <h1>ğŸŒ Voice Translator + Video Call</h1>

  <label>From Language:</label>
  <select id="fromLang">
    <option value="en">English</option>
    <option value="te">Telugu</option>
    <option value="hi">Hindi</option>
  </select>

  <br/><br/>

  <label>To Language:</label>
  <select id="toLang">
    <option value="te">Telugu</option>
    <option value="en">English</option>
    <option value="hi">Hindi</option>
  </select>

  <br/><br/>

  <button onclick="startRecognition()">ğŸ¤ Start Speaking</button>
  <button onclick="speak()">ğŸ”Š Speak Translated Text</button>

  <p><strong>Original:</strong> <span id="originalText"></span></p>
  <p><strong>Translated:</strong> <span id="translatedText"></span></p>

  <iframe
    src="https://meet.jit.si/kireeti-room"
    width="100%" height="400px"
    allow="camera; microphone" allowfullscreen>
  </iframe>

  <script>
    let original = '';
    let translated = '';

    function startRecognition() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = document.getElementById('fromLang').value;

      recognition.onresult = function (event) {
        original = event.results[0][0].transcript;
        document.getElementById('originalText').textContent = original;
        translateText(original);
      };

      recognition.start();
    }

    function translateText(text) {
      const from = document.getElementById('fromLang').value;
      const to = document.getElementById('toLang').value;
      const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${from}&tl=${to}&dt=t&q=${encodeURI(text)}`;

      fetch(url)
        .then(res => res.json())
        .then(data => {
          translated = data[0][0][0];
          document.getElementById('translatedText').textContent = translated;
        });
    }

    function speak() {
      const utterance = new SpeechSynthesisUtterance(translated);
      utterance.lang = document.getElementById('toLang').value;
      speechSynthesis.speak(utterance);
    }
  </script>
</body>
</html>

